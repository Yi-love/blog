---
layout: page
title: bee.js一个类zepto的适合嵌入的小型库-01
categories: [JavaScript, bee.js]
tags: [前端开发,bee.js , 嵌入, dom ]
---

>###前言###
>已经有才不多一个月没有更新博客了，自从上个月分析完了zepto.js就没有再提笔写博客。一方面是自己确实有太多的东西不知道，
>另一方面,我在想该不该把这个库写出来--bee.js。我对bee.js的定位是：嵌入,小,模块化，所以我取了bee(蜜蜂)，本来是打算用蜂鸟的但是感觉太长了。
>可能因为我工作的原因,有时候需要在别人的页面里面嵌入一段js的时候，会发现别人的页面里面没有jquery | zepto
>之类的操作dom的类库,但又不想引入第3方库（因为感觉太大了）,瞬间感觉整个世界都不好了。

>bee.js github地址: [https://github.com/Yi-love/notice/blob/master/dev/src/bee/bee.js][bee]

[bee]:https://github.com/Yi-love/notice/blob/master/dev/src/bee/bee.js

>### 模块划分 ###
>大体上我打算将bee.js分为3个模块:

>1.   核心模块
>2.   event事件模块
>3.   ajax模块

>为了适应嵌入环境，所以压缩后的代码打算控制在10kb上下。以免对真正需要执行的代码增加负担。

>#### 核心模块 ####
>我对bee.js的第一个定位嵌入，就是为了可以嵌入到页面当中。所以它必须小，所以核心模块的功能只有基本的：

>1.   dom获取
>2.   className操作
>3.   html操作
>4.   text操作
>5.   attr操作
>6.   val操作

>我想说，你会用jquery|zepto那么你就会bee.js，可以说 bee.js就是mini版的zepto,zepto已经超过了20kb，
>作为嵌入执行代码已经感觉它太过于庞大了。

>#### 正题 ####
>zepto源码分析的第一篇我就已经分析过了dom的操作，这篇主要是来聊聊第二次解读zepto源码已经编写bee.js时所遇到的问题。
>有时候你觉得很简单的事情可能并不简单。就好比我遇到的第一个问题，如何使 *new Bee(dom , selector)* 返回的是一个数组，
>而不是一个对象。

>你可能会觉得好笑，不加思索或者没有真正了解js的话你可能觉得这真的是一件不可思议的事。这第一个坑我踩的满满的。我努力的
>比对了zepto和我自己的代码，没什么出入啊。

>最后通过代码删减法，比对出了差别，那就是$.fn中多了以下几个函数：
![$.fn]({{site.baseurl}}/images/2015/1218_01.jpg)

>这个是为什么呢，唯一有可能就是 *new Bee(dom , selector)*有了数组的某些功能，使它返回变为数组。
>我们都知道：数组有两种基本的创建方式：
{% highlight js %}
    //使用Array构造函数
    var arr = new Array()
    //赋值法
    var arr2 = [];
{% endhighlight %}

>我想可能因为$.fn添加了数组的几个基本函数而造成了 *new Bee(dom , selector)*返回的变为数组。

>说到这我不免有一点感伤，只能怪我没有很好的理解zepto使用的创建对象的模式。所以在理思路的时候总是一团糟。
>这几天我也没有闲着，在恶补js的对象创建以及继承。
























