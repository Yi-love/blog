---
layout: page
title: zepto.js.v1.0 源码解读-02
categories: [JavaScript]
tags: [前端开发,zepto , 源码 , ajax ]
---

>第一篇zepto源码我已经对zepto的核心选择器分析了一番，这一篇主要的解读一下ajax模块。看zepto是怎么实现ajax这个基本的模块的。
>我们知道不管是zepto还是jquery都可以通过下面的方式获取到服务器的数据或者向服务器发送数据。
{% highlight js %}
 	$.ajax({
 		type:"post",//get
		url:"/ajax",
		async:true,
		data : {ajax:true},
		success : function(res){
			console.log(res);
		}
 	});
{% endhighlight %}
>这里我也写了一段很简单的js模拟ajax功能。

{% highlight js %}
 	var $ = {
		ajax : function(options){
			var xhr = new window.XMLHttpRequest()
			xhr.open(options.type , options.url , options.async)
			if ( options.type.toUpperCase() === 'POST')
				xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded")			
			xhr.onreadystatechange = function(){
				if ( xhr.readyState === 4 ) {
					if ( xhr.status === 200 || xhr.status === 304 ) {
						options.success(xhr.responseText)
					}
				}
			}
			xhr.send(options.data ? options.data : null)
		}
	}
	$.ajax({
		type:"post",//get
		url:"/ajax",
		async:true,
		data : 'ajax=true',
		success : function(res){
			console.log(res);
		}
	})
{% endhighlight %}
>上面的这段代码是不完善的，要真正的使用的话必须进行加工，也就是处理各种有可能出现的情况。

>未完待续.....









































