<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
	<meta charset="UTF-8">
<meta name="apple-mobile-web-app-title" content="Jekyll在github博客中的应用">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-touch-fullscreen" content="yes">
<meta http-equiv="Cache-Control" content="no-siteapp">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="format-detection" content="telephone=no">
<meta name="format-detection" content="email=no">
<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
<link rel="stylesheet" href="/blog/stylesheets/normalize.css">
<link rel="stylesheet" href="/blog/stylesheets/base.css">
<link rel="stylesheet" href="/blog/stylesheets/monokai.css">
<script src="/blog/javascripts/base.js"></script>
<title>Jekyll在github博客中的应用</title>
</head>
<body>
	<div class="j-container-fluid j-header">
	<div class="j-row">
		<div class="j-container">
			<h1 class="j-logo"><a href="/blog/"><img src="/blog/images/logo.png" /> </a></h1>
			<nav class="j-row j-nav">
				<a href="/blog/">首页</a>
				<a href="/blog/list.html">归档</a>
				<a href="https://github.com/Yi-love">Github</a>
				<a href="/blog/me.html">Me</a>
				<a href="http://blog.csdn.net/yjy188" target="_blank">CSDN博客</a>
			</nav>
		</div>
	</div>
</div>
	<div class="j-container">
		<div class="j-row">
			<div class="j-col-xs-12 j-col-sm-12 j-col-md-9">
				<div class="j-container j-content">
					<h2 class="j-i-title"><a href="javascript:void(0)" title="Jekyll在github博客中的应用">Jekyll在github博客中的应用</a></h2>
						<p class="j-i-time">04 Nov 2015</p>
						<p class="j-i-tags">
							
							<span class="j-i-tag">git</span>
							
							<span class="j-i-tag">jekyll</span>
							
						</p>
						<div class="j-container">
							<div class="j-row j-artclie-txt"><blockquote>
  <p>我们来继续讨论jekyll的实际应用中所遇到的问题以及解决之道。
jekyll的内容有很多,你如果想学深入理解jekyll那么你来错地方了。如果你是遇到了以下问题，那么希望以下内容的对你解决问题有所帮助。</p>
</blockquote>

<blockquote>
  <h3 id="section">问题</h3>
</blockquote>

<blockquote>
  <ol>
    <li>输出全部文章</li>
    <li>文章分类</li>
    <li>文章添加标签</li>
    <li>文章显示</li>
  </ol>
</blockquote>

<blockquote>
  <h4 id="jekyll--4">jekyll 的全局变量有 4个</h4>
</blockquote>

<figure class="highlight"><pre><code class="language-tex" data-lang="tex"> 	site: 整个站点的信息
 	page: 当前页面的所有信息
 	content: 所有布局文件被渲染之后的内容(In layout files, the rendered content of the Post or Page being wrapped. )
 	paginator:这个配置是要配置的，相当于自定义变量</code></pre></figure>

<blockquote>
  <p>site 的参数有很多。下面我就列举一下常用的几个。</p>
</blockquote>

<figure class="highlight"><pre><code class="language-tex" data-lang="tex"> 	site.time  : 运行jekyll命令的时间
 	site.pages : 所有页面，注意是页面
 	site.posts ：所有文章
 	site.static<span class="p">_</span>files : 静态文件，或者是没有被修改的文件
 	site.html<span class="p">_</span>pages ： 所有html页面
 	site.html<span class="p">_</span>files ： 所有静态的html页面,就是不用jekyll处理的页面
 	site.collections : 列表信息
 	site.data ： <span class="p">_</span>data目录下的信息
 	site.documents : 所有页面的domcument，说白了就是html页面
 	site.categories ： 所有分类 的文章
 	site.categories.CATEGORY : CATEGORY分类下的文章
 	site.tags.TAG : 获取 TAG 标签下的所有文章</code></pre></figure>

<h4 id="section-1">1.输出全部文章</h4>

<blockquote>
  <p>site 是整个站点的根一样，这个变量下有很多的小的参数。可以通过 { {site.name}} 来获取信息。
比如要获取站点的全部文章就可以通过 { {site.posts}}来获取所有在  _posts目录下的所有文章。
通过for循环来遍历输出所有的文章。</p>
</blockquote>

<figure class="highlight"><pre><code class="language-html" data-lang="html"> 	<span class="c">&lt;!-- exampole --&gt;</span>
 	{ % for post in site.posts %}
	<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"j-row j-list-i"</span><span class="nt">&gt;</span>
		{ {post}}  //输出文章
	<span class="nt">&lt;/li&gt;</span>
	{ % endfor %}</code></pre></figure>

<blockquote>
  <p>page 是单独的对一个页面来的，它包含了以下信息</p>
</blockquote>

<figure class="highlight"><pre><code class="language-tex" data-lang="tex"> 	page.content : 文章的内容部分
 	page.title ： 文章标题
 	page.excerpt : 文章摘要
 	page.url : 文章的链接   //e.g.  /2008/12/14/my-post.html
 	page.date ： 文章的时间  
 	page.id ： 符合文章的唯一路径  //e.g. /2008/12/14/my-post
 	page.categories ： 文章的分类     ['',''] 数组
 	page.tags : 文章的标签 也是数组
 	page.path : 文章的文件路径 // e.g.  <span class="p">_</span>posts/2015-11-04-jekyll.md
 	page.next ： 下一篇文章  ， 没有为nil
 	page.previous ： 上一篇文章  没有为 nil</code></pre></figure>

<blockquote>
  <p>通过site 和 page 可以完成对所有文章的遍历了。</p>
</blockquote>

<figure class="highlight"><pre><code class="language-html" data-lang="html"> 	<span class="c">&lt;!-- exampole --&gt;</span>
 	<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"j-container"</span><span class="nt">&gt;</span>
	 	{ % for post in site.posts %}
		<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"j-row j-list-i"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">"j-i-title"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{ {site.baseurl}}{ {post.url}}"</span><span class="nt">&gt;</span>{ {post.title}}<span class="nt">&lt;/a&gt;&lt;/h2&gt;</span>
			<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"j-i-time"</span><span class="nt">&gt;</span>{ {post.date | date_to_string}}<span class="nt">&lt;/p&gt;</span>
			<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"j-i-tags"</span><span class="nt">&gt;</span>
				{ %for tag in post.tags %}
				<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"j-i-tag"</span><span class="nt">&gt;</span>{ {tag}}<span class="nt">&lt;/span&gt;</span>
				{ % endfor %}
			<span class="nt">&lt;/p&gt;</span>
			<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"j-container"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"j-row j-artclie-txt"</span><span class="nt">&gt;</span>{ {post.excerpt}}<span class="nt">&lt;/div&gt;</span>
			<span class="nt">&lt;/div&gt;</span>
		<span class="nt">&lt;/li&gt;</span>
		{ % endfor %}
	<span class="nt">&lt;/ul&gt;</span></code></pre></figure>

<h4 id="section-2">2.文章分类</h4>
<blockquote>
  <p>因为jekyll是没有后台的，所以不可能说像有后台的网站一样传递一个类别参数就可以返回指定的类别文章。
但是jekyll也可打到那种效果。
首先文章需要定义了categories参数。</p>
</blockquote>

<blockquote>
  <p>1.每个分类写一个页面</p>
</blockquote>

<blockquote>
  <p>这种方法可行，但纯属作死,有5个分类就要写5个，那100个就写100个，灵活度不够，而且难以维护。</p>
</blockquote>

<blockquote>
  <p>2.通过给url带上一个参数</p>
</blockquote>

<blockquote>
  <p>这种方法是可行的，我目前就是使用这种方式。</p>
</blockquote>

<blockquote>
  <p>首先，不过自己需要写一段js代码去解析url获取到分类的参数</p>
</blockquote>

<blockquote>
  <p>其次，可以使用 site.categories 获取所有的文章，并且通过js的JSON.parse转换成json对象。</p>
</blockquote>

<blockquote>
  <p>最后，就是通过js渲染页面就可以了。</p>
</blockquote>

<blockquote>
  <p>那么就牵涉到两个页面，第一分类列表页，第二分类文章输出页面。</p>
</blockquote>

<blockquote>
  <p>1.分类输出</p>
</blockquote>

<figure class="highlight"><pre><code class="language-html" data-lang="html"> 	<span class="c">&lt;!-- exampole --&gt;</span>
 	{ % for category in site.categories %}
		<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{ {site.baseurl}}/category.html?category={ { category|first}}"</span><span class="nt">&gt;</span>{ {category | first}} <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"j-class-i-num"</span><span class="nt">&gt;</span>({ {category | last | size}})<span class="nt">&lt;/span&gt;&lt;/a&gt;</span>
	{ % endfor %}</code></pre></figure>

<blockquote>
  <p>{ {site.baseurl}}/category.html?category={ { category|first}} 就是访问这个类别的url链接，
页面为根目录下的category.html  , 参数 category 就是类别参数。</p>
</blockquote>

<blockquote>
  <p>2.类别文章获取，渲染</p>
</blockquote>

<blockquote>
  <p>category.html页面通过js获取category参数来获取到指定类别的数据</p>
</blockquote>

<figure class="highlight"><pre><code class="language-js" data-lang="js">	<span class="c1">//decodeURIComponent 是为了防止浏览器转义中文字体，然后获取不到。</span>
 	<span class="kd">var</span> <span class="nx">category</span> <span class="o">=</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">parseURL</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">).</span><span class="nx">params</span><span class="p">[</span><span class="s2">"category"</span><span class="p">]);</span>
	<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="s1">'{ { % for categorie in site.categories %}{ % if categorie[0] != site.categories.first[0] %},{ % endif %}"{ { categorie[0] }}":[{ % for post in categorie[1] %}{ % if post != categorie[1].first %},{ % endif %}{"url":"{ {post.url}}", "tags":{ {post.tags | jsonify }} , "content":"{ {post.excerpt | uri_escape}}" , "title":"{ {post.title}}","date":"{ {post.date | date:"%d/%m/%Y"}}"}{ % endfor %}]{ % endfor %} }'</span><span class="p">;</span>
	<span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">)[</span><span class="nx">category</span><span class="p">];</span></code></pre></figure>

<blockquote>
  <p>可能你不明白 parseURL是什么，看词取义就是解析url链接。
这个是我自己写的一个解析url链接的函数。</p>
</blockquote>

<figure class="highlight"><pre><code class="language-js" data-lang="js">	<span class="cm">/**
	 * [parseURL 解析url]
	 * @param  {[String]} url [url]
	 * @return {[Object]}     [返回解析好的对象]
	 */</span>
	<span class="kd">function</span> <span class="nx">parseURL</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
	    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span>  <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">"a"</span><span class="p">);</span>
	    <span class="nx">a</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
	    <span class="k">return</span> <span class="p">{</span>
	        <span class="na">source</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
	        <span class="na">protocol</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">protocol</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">":"</span><span class="p">,</span><span class="s2">""</span><span class="p">),</span>
	        <span class="na">host</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">hostname</span><span class="p">,</span>
	        <span class="na">port</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">port</span><span class="p">,</span>
	        <span class="na">query</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">search</span><span class="p">,</span>
	        <span class="na">params</span><span class="p">:</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	            <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">{},</span>
	                <span class="nx">seg</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^</span><span class="se">\?</span><span class="sr">/</span><span class="p">,</span><span class="s2">""</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">"&amp;"</span><span class="p">),</span>
	                <span class="nx">len</span> <span class="o">=</span> <span class="nx">seg</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">s</span><span class="p">;</span>
	            <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
	                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">seg</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span> <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>
	                <span class="nx">s</span> <span class="o">=</span> <span class="nx">seg</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s2">"="</span><span class="p">);</span>
	                <span class="nx">ret</span><span class="p">[</span><span class="nx">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
	            <span class="p">}</span>
	            <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
	        <span class="p">})(),</span>
	        <span class="na">file</span><span class="p">:</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">pathname</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/</span><span class="se">\/([^\/</span><span class="sr">?#</span><span class="se">]</span><span class="sr">+</span><span class="se">)</span><span class="sr">$/i</span><span class="p">)</span> <span class="o">||</span> <span class="p">[,</span><span class="s2">""</span><span class="p">])[</span><span class="mi">1</span><span class="p">],</span>
	        <span class="na">hash</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">"#"</span><span class="p">,</span><span class="s2">""</span><span class="p">),</span>
	        <span class="na">path</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">pathname</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^</span><span class="se">([^\/])</span><span class="sr">/</span><span class="p">,</span><span class="s2">"/$1"</span><span class="p">),</span>
	        <span class="na">relative</span><span class="p">:</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/tps</span><span class="se">?</span><span class="sr">:</span><span class="se">\/\/[^\/]</span><span class="sr">+</span><span class="se">(</span><span class="sr">.+</span><span class="se">)</span><span class="sr">/</span><span class="p">)</span> <span class="o">||</span> <span class="p">[,</span><span class="s2">""</span><span class="p">])[</span><span class="mi">1</span><span class="p">],</span>
	        <span class="na">segments</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">pathname</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^</span><span class="se">\/</span><span class="sr">/</span><span class="p">,</span><span class="s2">""</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)</span>
	    <span class="p">};</span>
	<span class="p">}</span></code></pre></figure>

<blockquote>
  <h4 id="section-3">3.文章标签</h4>
  <p>文章标签主要的作用就是定位文章的信息点以及方向。比如有篇文章是属于前端开发，但前端有这么多内容那么就可以通过标签来细分这篇文章是主要讲哪个方面的信息。
添加标签很简单只要在每篇文章的头部添加tags标签即可，输出如下。</p>
</blockquote>

<figure class="highlight"><pre><code class="language-html" data-lang="html">	{ %for tag in post.tags %}
		<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"j-i-tag"</span><span class="nt">&gt;</span>{ {tag}}<span class="nt">&lt;/span&gt;</span>
	{ % endfor %}</code></pre></figure>

<blockquote>
  <p>你是否会发现一个规律，凡是能用<em>for</em>输出的必定可以定义为数组，那就说明 categories 和 tags 参数都可以定义为数组。</p>
</blockquote>

<h4 id="section-4">4.文章输出</h4>
<blockquote>
  <p>通过观察page变量所含的参数，就可以输出一篇文章的内容。</p>
</blockquote>

<figure class="highlight"><pre><code class="language-html" data-lang="html">	<span class="cp">&lt;!DOCTYPE html&gt;</span>
	<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"zh-cmn-Hans"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;head&gt;</span>
		{ % include base.html %}
	<span class="nt">&lt;/head&gt;</span>
	<span class="nt">&lt;body&gt;</span>
		{ % include header.html %}
		<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"j-container"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"j-row"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"j-col-xs-12 j-col-sm-12 j-col-md-9"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"j-container j-content"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">"j-i-title"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{ {site.baseurl}}{ {page.url}}"</span><span class="nt">&gt;</span>{ {page.title}}<span class="nt">&lt;/a&gt;&lt;/h2&gt;</span>
							<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"j-i-time"</span><span class="nt">&gt;</span>{ {page.date | date_to_string}}<span class="nt">&lt;/p&gt;</span>
							<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"j-i-tags"</span><span class="nt">&gt;</span>
								{ %for tag in page.tags %}
								<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"j-i-tag"</span><span class="nt">&gt;</span>{ {tag}}<span class="nt">&lt;/span&gt;</span>
								{ % endfor %}
							<span class="nt">&lt;/p&gt;</span>
							<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"j-container"</span><span class="nt">&gt;</span>
								<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"j-row j-artclie-txt"</span><span class="nt">&gt;</span>{ {content}}<span class="nt">&lt;/div&gt;</span>
							<span class="nt">&lt;/div&gt;</span>
					<span class="nt">&lt;/div&gt;</span>
				<span class="nt">&lt;/div&gt;</span>
				{ % include side.html %}
			<span class="nt">&lt;/div&gt;</span>
		<span class="nt">&lt;/div&gt;</span>
		{ % include footer.html %}
	<span class="nt">&lt;/body&gt;</span>
	<span class="nt">&lt;/html&gt;</span></code></pre></figure>

</div>
						</div>
				</div>
			</div>
			<div class="j-col-xs-12 j-col-sm-12 j-col-md-3">
	<div class="j-user">
		<div class="j-user-thumb">
			<a href="/blog/me.html"><img src="/blog/images/user.jpg" alt="" /></a>
		</div>
		<div class="j-user-info">
			<a href="/blog/me.html">微信</a>
			<a href="/blog/me.html">微博</a>
			<a href="/blog/me.html">QQ</a>
		</div>
	</div>
	<div class="j-class-list">
		<h3 class="j-row">分类</h3>
		
		<a href="/blog/category.html?category=笔记">笔记 <span class="j-class-i-num">(12)</span></a>
		
		<a href="/blog/category.html?category=JavaScript">JavaScript <span class="j-class-i-num">(10)</span></a>
		
		<a href="/blog/category.html?category=bee.js">bee.js <span class="j-class-i-num">(1)</span></a>
		
		<a href="/blog/category.html?category=Promise">Promise <span class="j-class-i-num">(3)</span></a>
		
	</div>
</div>
		</div>
	</div>
	<div class="j-container-fluid j-footer">
	<div class="j-container">
		<p class="j-footer-say">喜欢一个人需要理由吗？需要吗？不需要吗？需要吗？……</p>
		<p class="j-footer-say j-tlgr">——周星驰 《大话西游》</p>
	</div>
</div>

</body>
</html>