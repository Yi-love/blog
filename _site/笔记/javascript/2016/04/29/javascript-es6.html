<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
	<meta charset="UTF-8">
<meta name="apple-mobile-web-app-title" content="JavaScript ES6语法初体验">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-touch-fullscreen" content="yes">
<meta http-equiv="Cache-Control" content="no-siteapp">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="format-detection" content="telephone=no">
<meta name="format-detection" content="email=no">
<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
<link rel="stylesheet" href="/blog/stylesheets/normalize.css">
<link rel="stylesheet" href="/blog/stylesheets/base.css">
<link rel="stylesheet" href="/blog/stylesheets/monokai.css">
<script src="/blog/javascripts/base.js"></script>
<title>JavaScript ES6语法初体验</title>
</head>
<body>
	<div class="j-container-fluid j-header">
	<div class="j-row">
		<div class="j-container">
			<h1 class="j-logo"><a href="/blog/"><img src="/blog/images/logo.png" /> </a></h1>
			<nav class="j-row j-nav">
				<a href="/blog/">首页</a>
				<a href="/blog/list.html">归档</a>
				<a href="https://github.com/Yi-love">Github</a>
				<a href="/blog/me.html">Me</a>
				<a href="http://blog.csdn.net/yjy188" target="_blank">CSDN</a>
			</nav>
		</div>
	</div>
</div>
	<div class="j-container">
		<div class="j-row">
			<div class="j-col-xs-12 j-col-sm-12 j-col-md-9">
				<div class="j-container j-content">
					<h2 class="j-i-title"><a href="javascript:void(0)" title="JavaScript ES6语法初体验">JavaScript ES6语法初体验</a></h2>
						<p class="j-i-time">29 Apr 2016</p>
						<p class="j-i-tags">
							
							<span class="j-i-tag">js</span>
							
							<span class="j-i-tag">es6</span>
							
							<span class="j-i-tag">前端</span>
							
						</p>
						<div class="j-container">
							<div class="j-row j-artclie-txt"><p>ECMAScript 6（以下简称ES6）是JavaScript语言的下一代标准，已经在2015年6月正式发布了。
它的目标，是使得JavaScript语言可以用来编写复杂的大型应用程序，成为企业级开发语言。</p>

<p>ECMAScript和JavaScript的关系是，前者是后者的规格，后者是前者的一种实现（另外的ECMAScript方言还有Jscript和ActionScript）。</p>

<h3 id="let--const-">1. <code>let</code> 和 <code>const</code> 变量定义</h3>

<h4 id="section">作用域</h4>
<p>let 与 var 都是用来定义变量的。var 全局范围有效,let局部有效。</p>

<p><code>for</code>循环最合适 <code>let</code>定义变量：</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">];</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span> <span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
  <span class="c1">//ReferenceError: i is not defined</span></code></pre></figure>

<p><code>let</code> 和 <code>var</code> 作用域区别:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"> <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[];</span>
 <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
   <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
   <span class="p">}</span>
 <span class="p">}</span>
 <span class="nx">arr</span><span class="p">[</span><span class="mi">6</span><span class="p">]();</span><span class="c1">//10</span></code></pre></figure>

<p><code>i</code> 是全局的，所以都会输出最后i的值。</p>

<p>使用 <code>let</code>，声明的变量仅在块级作用域内有效，最后输出的是6。</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"> <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[];</span>
 <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
   <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
   <span class="p">}</span>
 <span class="p">}</span>
 <span class="nx">arr</span><span class="p">[</span><span class="mi">6</span><span class="p">]();</span><span class="c1">//6</span></code></pre></figure>

<p>每次循环 <code>i</code> 都是一个新的变量。</p>

<h4 id="section-1">不存在变量提升</h4>
<p><code>let</code> 不像 <code>var</code> 变量。可以先使用后定义。</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="c1">//ReferenceError: b is not defined</span>
 <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
 <span class="kd">let</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span></code></pre></figure>

<h4 id="section-2">暂时性死区</h4>
<p>只要块级作用域存在 <code>let</code>命令，它所声明的变量就会绑定在这个区域。</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"> <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
 <span class="k">if</span><span class="p">(</span><span class="kc">true</span><span class="p">){</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="c1">//ReferenceError: a is not defined</span>
   <span class="kd">let</span> <span class="nx">a</span><span class="p">;</span>
 <span class="p">}</span></code></pre></figure>

<p>隐蔽的死区。</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"> <span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span><span class="o">+</span><span class="nx">y</span><span class="p">;</span>
 <span class="p">}</span>
<span class="nx">add</span><span class="p">();</span> <span class="c1">// 报错</span></code></pre></figure>

<h4 id="section-3">不允许重复声明</h4>
<p>let不允许在相同作用域内，重复声明同一个变量。</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></code></pre></figure>

<h3 id="const">const常量</h3>
<p>const也用来声明变量，但是声明的是常量。一旦声明，常量的值就不能改变。</p>

<p>普通模式：</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kr">const</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
  <span class="nx">c</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="c1">//123</span></code></pre></figure>

<p>严格模式：</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="s1">'use strict'</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
  <span class="nx">c</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span><span class="c1">//TypeError: Assignment to constant variable.</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span></code></pre></figure>

<p>作用域：</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="k">if</span><span class="p">(</span><span class="kc">true</span><span class="p">){</span>
   <span class="kr">const</span> <span class="nx">a</span> <span class="o">=</span><span class="mi">12</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span></code></pre></figure>

<p>const变量必须先申明后使用。</p>

</div>
						</div>
				</div>
			</div>
			<div class="j-col-xs-12 j-col-sm-12 j-col-md-3">
	<div class="j-user">
		<div class="j-user-thumb">
			<a href="/blog/me.html"><img src="/blog/images/user.jpg" alt="" /></a>
		</div>
		<div class="j-user-name"><h3>Jin</h3></div>
		<div class="j-user-info">
			<a href="/blog/me.html">微信</a>
			<a href="/blog/me.html">微博</a>
			<a href="/blog/me.html">QQ</a>
		</div>
	</div>
	<div class="j-class-list">
		<h3 class="j-row">分类</h3>
		
		<a href="/blog/category.html?category=笔记">笔记 <span class="j-class-i-num">(21)</span></a>
		
		<a href="/blog/category.html?category=JavaScript">JavaScript <span class="j-class-i-num">(13)</span></a>
		
		<a href="/blog/category.html?category=bee.js">bee.js <span class="j-class-i-num">(1)</span></a>
		
		<a href="/blog/category.html?category=Promise">Promise <span class="j-class-i-num">(3)</span></a>
		
		<a href="/blog/category.html?category=工具">工具 <span class="j-class-i-num">(3)</span></a>
		
		<a href="/blog/category.html?category=Git">Git <span class="j-class-i-num">(1)</span></a>
		
		<a href="/blog/category.html?category=vim">vim <span class="j-class-i-num">(1)</span></a>
		
		<a href="/blog/category.html?category=gulp">gulp <span class="j-class-i-num">(1)</span></a>
		
		<a href="/blog/category.html?category=Node">Node <span class="j-class-i-num">(2)</span></a>
		
		<a href="/blog/category.html?category=IE兼容">IE兼容 <span class="j-class-i-num">(2)</span></a>
		
		<a href="/blog/category.html?category=CSS">CSS <span class="j-class-i-num">(2)</span></a>
		
	</div>
</div>
		</div>
	</div>
	<div class="j-container-fluid j-footer">
	<div class="j-container">
		<p class="j-footer-say">喜欢一个人需要理由吗？需要吗？不需要吗？需要吗？……</p>
		<p class="j-footer-say j-tlgr">——周星驰 《大话西游》</p>
	</div>
</div>
<div class="j-tips-box">
	<div class="j-tips-max-box" onclick="fullScreen()">
		<span class="l-t"></span>
		<span class="r-t"></span>
		<span class="l-b"></span>
		<span class="r-b"></span>
	</div>
	<div class="j-tips-top-box">
		<a href="javascript:window.scrollTo(0,0)" class="j-tip-top"><span class="l-bar"></span><span class="r-bar"></span></a>
	</div>
</div>
</body>
</html>